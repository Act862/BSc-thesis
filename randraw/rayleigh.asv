threshold = 1;
noiseSNRdb = 20;
sampleSize = [1 1e3];
Kdb = -20:10;
%   get the ratio in number, and not dB
K = 10.^(Kdb./10);

ge = noiseSNRdb.*mean(randi([0 100], sampleSize));
gd = K.*ge;

lambda = 10^threshold;

sop = 1-exp((-lambda+1)./gd).*(gd./(lambda*ge+gd));
sop = sop/sampleSiz
figure;
semilogy(Kdb, sop);
grid on;